<html>

<head>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <link rel="shortcut icon" href="img/arda.jpg.png">

  <style>
    body {
      margin: 0;
    }
  </style>

  <script src="https://unpkg.com/d3-array"></script>
  <script src="https://unpkg.com/d3-scale"></script>

  <script src="https://unpkg.com/globe.gl"></script>
  <!-- <script src="../../dist/globe.gl.js"></script> -->

  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.5.0/remixicon.min.css">
  <link rel="shortcut icon"  href="img/arda.jpg.png">

  <link rel="stylesheet" href="css/style-moonmap.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Cabin&family=Changa:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Cabin:wght@700&family=Rubik:wght@700&display=swap"
    rel="stylesheet">

</head>

<body>

  <nav style="position: fixed; z-index: 2; margin-left: 30px;">

    <div class="nav-logo">

        <a href="index.html">
            <h1 class="teamname">COTS</h1>
        </a>
    </div>
<!--
    <ul class="nav-links">
        <li class="link"><a href="index.html">Main Page</a></li>
        <li class="link"><a href="types-of-moonquakes.html">Types of Moonquakes</a></li>
        <li class="link"><a href="other-maps.html">Other Maps</a></li>
        <li class="link"><a href="sources.html">Sources</a></li>
        <li class="link"><a href="news.html">News</a></li>
        <li class="link"><a href="datas.html">Datas</a></li>
        <li class="link"><a href="teams.html">Team</a></li>

    </ul>

    <button class="btn" onclick="location.href = 'https://conquerorsofthesatellite.co/moonmap.html';"> Moonquake Map</button>
-->
</nav>

  <style>
    body
    {
      font-family: 'Changa';
    }
  </style>


  <div id="menu"
    style="position:absolute; z-index:30; width:300px;left: 40%; height:55px; background-color: #000000;background: transparent; top:8%">

    <div style="display:flex; justify-content: space-around; align-items: center; height: 100%; text-align: center">
      <h2 id="con"
        style="box-sizing: border-box; border-bottom: 2px solid white; font-size: 24px; color:azure ; cursor: pointer;font-family: 'Cabin', sans-serif">
        Timeline</h2>
      <h2 id="nak"
        style="box-sizing: border-box; font-size: 24px; color: white; cursor: pointer;font-family: 'Cabin', sans-serif; color: azure;">
        Events</h2>
    </div>
  </div>

  <div id="contdata"
    style="position:absolute; z-index:20; top:50px; width:500px; background-color: #000000;background: transparent; top:208px;">
    <h1
      style="font-size: 30px; font-weight: bold; color: white; text-align: center; margin: 8px 0 8px 0;font-family: 'Cabin', sans-serif;letter-spacing: 1px;">
      Moonquake Map</h1>
    <div class="" style="text-align: center;">
      <h3 style="font-size: 20px; color:white; font-weight: bold;font-family: 'Rubik', sans-serif">Year</h3>
      <input id="yearslider" min="0" max="8" value="0" type="range" class="form-range" style="width: 81%;">
      <div style="margin-top: 5px;">
        <label id="yearlabel" for="customRange1" class="form-label" style="display: inline-block; padding: 0 8px 0 8px; text-align:center; font-size: 27px; border-radius: 10px; padding: 0px 8px 0 8px;color: whitesmoke;  background: linear-gradient(
                130deg,  #3b0179,#61026b
            );">1969</label>
      </div>

      <h3 style="font-size: 20px; color:whitesmoke; font-weight: bold;font-family: 'Rubik', sans-seri">Month</h3>
      <input id="monthslider" min="0" max="11" value="0" type="range" class="form-range" style="width: 80%;">
      <div style="margin-top: 5px;">
        <label id="monthlabel" for="customRange1" class="form-label" style="display: inline-block; padding: 0 8px 0 8px; text-align:center; font-size: 27px; border-radius: 10px; padding: 0px 8px 0 8px;color: whitesmoke;  background: linear-gradient(
                130deg,  #3b0179,#61026b
            );;">Jan</label>
      </div>

      <h3 style="font-size: 20px; color:white; font-weight: boldv;font-family: 'Rubik', sans-seri">Day</h3>
      <input id="dayslider" min="1" max="30" value="1" type="range" class="form-range" style="width: 80%;">
      <div style="margin-top: 5px;">
        <label id="daylabel" for="customRange1" class="form-label" style="display: inline-block; padding: 0 8px 0 8px; text-align:center; font-size: 27px; border-radius: 10px; padding: 0px 8px 0 8px;color: whitesmoke;  background: linear-gradient(
                130deg,  #3b0179,#61026b
            );;">1</label>
      </div>
    </div>
  </div>

  <div id="nakamura"
    style="display:none; position:absolute; z-index:20; width:300px; right: 0%;  background: transparent; text-align:center; border: 1px solid transparent; top:8%;">
    <h1
      style="font-size: 38px; font-weight: bold; color: white; text-align: center; margin: 8px 0 8px 0;font-family: 'Cabin', sans-serif">
      Seismic Events</h1>
    <div id="naklabels" style="text-align: center; margin-top: 10px; height: 70vh; overflow: auto;">
      <br>


      <div class="Shallow">
        <h2 class="ShallowMoon">Shallow Moonquakes</h2>
      </div>
      <h4 class="ShallowMoon"> ( No Magnitude Data )</h4>

      <div nakNum="0" style="margin: 20px 0px;">
        <h3 class="shalloww">1972, 17 October</h3>
      </div>

      <div nakNum="1" style="margin: 20px 0px;">
        <h3 class="shalloww">1972, 6 December</h3>
      </div>

      <div nakNum="2" style="margin: 20px 0px;">
        <h3 class="shalloww">1975, 3 January</h3>
      </div>

      <div nakNum="3" style="margin: 20px 0px;">
        <h3 class="shalloww">1975, 13 February</h3>
      </div>

      <div nakNum="4" style="margin: 20px 0px;">
        <h3 class="shalloww">1976, 4 January</h3>
      </div>

      <div nakNum="5" style="margin: 20px 0px;">
        <h3 class="shalloww">1976, 6 March</h3>
      </div>

      <div class="Shallow">
        <h2 class="ShallowMoon">Natural Impact</h2>
      </div>
      <h4 class="ShallowMoon"> ( No Magnitude Data )</h4>

      <div nakNum="6" style="margin: 20px 0px;">
        <h3 class="natural">1972, 31 May</h3>
      </div>

      <div nakNum="7" style="margin: 20px 0px;">
        <h3 class="natural">1973, 26 September </h3>
      </div>

      <div nakNum="8" style="margin: 20px 0px;">
        <h3 class="natural">1973, 30 September</h3>
      </div>

      <div nakNum="9" style="margin: 20px 0px;">
        <h3 class="natural">1974, 19 April</h3>
      </div>

      <div nakNum="10" style="margin: 20px 0px;">
        <h3 class="natural">1974, 17 August</h3>
      </div>

      <div nakNum="11" style="margin: 20px 0px;">
        <h3 class="natural">1974, 21 July</h3>
      </div>

      <div nakNum="12" style="margin: 20px 0px;">
        <h3 class="natural">1975, 12 April</h3>
      </div>

      <div nakNum="13" style="margin: 20px 0px;">
        <h3 class="natural">1975, 4 May</h3>
      </div>

      <div nakNum="14" style="margin: 20px 0px;">
        <h3 class="natural">1976, 14 Nowember</h3>
      </div>

      <div nakNum="15" style="margin: 20px 0px;">
        <h3 class="natural">1977, 11 April</h3>
      </div>

      <div nakNum="16" style="margin: 20px 0px;">
        <h3 class="natural">1977, 28 June</h3>
      </div>

      <div class="Shallow">
        <h2 class="ShallowMoon">Deep Moonquakes</h2>
      </div>
      <h4 class="ShallowMoon"> ( No Magnitude Data )</h4>

      <div nakNum="17" style="margin: 20px 0px;">
        <h3 class="deep">1972, 13 May</h3>
      </div>

      <div nakNum="18" style="margin: 20px 0px;">
        <h3 class="deep">1972, 15 May</h3>
      </div>

      <div nakNum="19" style="margin: 20px 0px;">
        <h3 class="deep">1972, 8 June</h3>
      </div>

      <div nakNum="20" style="margin: 20px 0px;">
        <h3 class="deep">1972, 14 June</h3>
      </div>

      <div nakNum="21" style="margin: 20px 0px;">
        <h3 class="deep">1972, 8 October</h3>
      </div>

      <div nakNum="22" style="margin: 20px 0px;">
        <h3 class="deep">1973, 30 April</h3>
      </div>

      <div nakNum="23" style="margin: 20px 0px;">
        <h3 class="deep">1973, 03 May</h3>
      </div>

      <div nakNum="24" style="margin: 20px 0px;">
        <h3 class="deep">1973, 28 May</h3>
      </div>

      <div nakNum="25" style="margin: 20px 0px;">
        <h3 class="deep">1973, 27 June</h3>
      </div>

      <div nakNum="26" style="margin: 20px 0px;">
        <h3 class="deep">1973, 30 September</h3>
      </div>

      <div nakNum="27" style="margin: 20px 0px;">
        <h3 class="deep">1974, 18 February</h3>
      </div>

      <div nakNum="28" style="margin: 20px 0px;">
        <h3 class="deep">1975, 5 March</h3>
      </div>

      <div nakNum="29" style="margin: 20px 0px;">
        <h3 class="deep">1976, 28 May</h3>
      </div>

      <div nakNum="30" style="margin: 20px 0px;">
        <h3 class="deep">1977, 16 April</h3>
      </div>

      <div nakNum="31" style="margin: 20px 0px;">
        <h3 class="deep">1977, 16 May</h3>
      </div>

      <div nakNum="32" style="margin: 20px 0px;">
        <h3 class="deep">1977, 19 May</h3>
      </div>

      <div nakNum="33" style="margin: 20px 0px;">
        <h3 class="deep">1977, 12 June</h3>
      </div>

      <div nakNum="34" style="margin: 20px 0px;">
        <h3 class="deep">1977, 18 June</h3>
      </div>

      <div class="Shallow">
        <h2 class="ShallowMoon">Shallow Moonquakes</h2>
      </div>
      <h4 class="ShallowMoon"> ( With Magnitude Data )</h4>

      <div nakNum="35" style="margin: 20px 0px;">
        <h3 class="unknown">1971, 17 April</h3>
      </div>

      <div nakNum="36" style="margin: 20px 0px;">
        <h3 class="unknown">1971, 20 May</h3>
      </div>

      <div nakNum="37" style="margin: 20px 0px;">
        <h3 class="unknown">1971, 11 July</h3>
      </div>

      <div nakNum="38" style="margin: 20px 0px;">
        <h3 class="unknown">1972, 2 January</h3>
      </div>

      <div nakNum="39" style="margin: 20px 0px;">
        <h3 class="unknown">1972, 17 September</h3>
      </div>



      <div nakNum="40" style="margin: 20px 0px;">
        <h3 class="unknown">1972, 06 December</h3>
      </div>

      <div nakNum="41" style="margin: 20px 0px;">
        <h3 class="unknown">1972, 09 December</h3>
      </div>

      <div nakNum="42" style="margin: 20px 0px;">
        <h3 class="unknown">1973, 08 February</h3>
      </div>

      <div nakNum="43" style="margin: 20px 0px;">
        <h3 class="unknown">1973, 13 March</h3>
      </div>

      <div nakNum="44" style="margin: 20px 0px;">
        <h3 class="unknown">1973, 20 June</h3>
      </div>

      <div nakNum="45" style="margin: 20px 0px;">
        <h3 class="unknown">1973, 01 October</h3>
      </div>

      <div nakNum="46" style="margin: 20px 0px;">
        <h3 class="unknown">1974, 23 February</h3>
      </div>

      <div nakNum="47" style="margin: 20px 0px;">
        <h3 class="unknown">1974, 27 March</h3>
      </div>

      <div nakNum="48" style="margin: 20px 0px;">
        <h3 class="unknown">1974, 19 April</h3>
      </div>

      <div nakNum="49" style="margin: 20px 0px;">
        <h3 class="unknown">1974, 29 May</h3>
      </div>

      <div nakNum="50" style="margin: 20px 0px;">
        <h3 class="unknown">1974, 11 July</h3>
      </div>

      <div nakNum="51" style="margin: 20px 0px;">
        <h3 class="unknown">1975, 03 January</h3>
      </div>

      <div nakNum="52" style="margin: 20px 0px;">
        <h3 class="unknown">1975, 12 January</h3>
      </div>

      <div nakNum="53" style="margin: 20px 0px;">
        <h3 class="unknown">1975, 13 January</h3>
      </div>

      <div nakNum="54" style="margin: 20px 0px;">
        <h3 class="unknown">1975, 13 February</h3>
      </div>

      <div nakNum="55" style="margin: 20px 0px;">
        <h3 class="unknown">1975, 07 May</h3>
      </div>

      <div nakNum="56" style="margin: 20px 0px;">
        <h3 class="unknown">1975, 27 May</h3>
      </div>

      <div nakNum="57" style="margin: 20px 0px;">
        <h3 class="unknown">1975, 10 November</h3>
      </div>

      <div nakNum="58" style="margin: 20px 0px;">
        <h3 class="unknown">1976, 04 January</h3>
      </div>

      <div nakNum="59" style="margin: 20px 0px;">
        <h3 class="unknown">1976, 12 January</h3>
      </div>

      <div nakNum="60" style="margin: 20px 0px;">
        <h3 class="unknown">1976, 06 March</h3>
      </div>

      <div nakNum="61" style="margin: 20px 0px;">
        <h3 class="unknown">1976, 08 March</h3>
      </div>

      <div nakNum="62" style="margin: 20px 0px;">
        <h3 class="unknown">1976, 16 May</h3>
      </div>

      <div nakNum="63" style="margin: 20px 0px;">
        <h3 class="unknown">1977, 28 Jun</h3>
      </div>


    </div>
    <button id="clearMap">Clear Map</button>
  </div>






  <div id="cont"
    style="display: none;position:absolute; right: 5px; top:5px; z-index:20; background-color: rgba(200, 255, 255, 0.6)">
    <div style="position: absolute; right:5px; cursor: pointer;"
      onclick="document.getElementById('cont').style.display = 'none';">
      <svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd"
          d="M5.72 5.72a.75.75 0 011.06 0L12 10.94l5.22-5.22a.75.75 0 111.06 1.06L13.06 12l5.22 5.22a.75.75 0 11-1.06 1.06L12 13.06l-5.22 5.22a.75.75 0 01-1.06-1.06L10.94 12 5.72 6.78a.75.75 0 010-1.06z" />
      </svg>
    </div>
    <img id="plots" src="" alt="" style="width:750px;">
  </div>


  <script>

    let marker = `<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
<path style="fill:#7107FC;" d="M507.494,426.066L282.864,53.536c-5.677-9.415-15.87-15.172-26.865-15.172
    c-10.994,0-21.188,5.756-26.865,15.172L4.506,426.066c-5.842,9.689-6.015,21.774-0.451,31.625
    c5.564,9.852,16.001,15.944,27.315,15.944h449.259c11.314,0,21.751-6.093,27.315-15.944
    C513.509,447.839,513.336,435.755,507.494,426.066z"/>
<path style="fill:#5F5AFF;" d="M255.999,38.365c-10.994,0-21.188,5.756-26.865,15.172L4.506,426.066
    c-5.842,9.689-6.015,21.774-0.451,31.625c5.564,9.852,16.001,15.944,27.315,15.944h224.629L255.999,38.365L255.999,38.365z"/>
<path style="fill:#5F5AFF;" d="M445.326,432.791H67.108c-3.591,0-6.911-1.909-8.718-5.012c-1.807-3.104-1.827-6.934-0.055-10.056
    L247.23,85.028c1.792-3.155,5.139-5.106,8.767-5.107c0.001,0,0.003,0,0.004,0c3.626,0,6.974,1.946,8.767,5.099l189.324,332.694
    c1.777,3.123,1.759,6.955-0.047,10.061S448.918,432.791,445.326,432.791z M84.436,412.616h343.543L256.013,110.423L84.436,412.616z"
    />
<path style="fill:#CCFFFF;" d="M256.332,412.616H84.436l171.576-302.192l-0.01-30.501h-0.005c-3.628,0.001-6.976,1.951-8.767,5.107
    L58.336,417.722c-1.773,3.123-1.752,6.953,0.055,10.056c1.807,3.104,5.127,5.012,8.718,5.012h189.224v-20.175H256.332z"/>
<path style="fill:#000000;" d="M279.364,376.883c0,12.344-10.537,23.182-22.88,23.182c-13.246,0-23.182-10.838-23.182-23.182
    c0-12.644,9.935-23.182,23.182-23.182C268.826,353.701,279.364,364.238,279.364,376.883z M273.644,319.681
    c0,9.333-10.236,13.246-17.462,13.246c-9.634,0-17.762-3.914-17.762-13.246c0-35.826-4.214-87.308-4.214-123.134
    c0-11.741,9.634-18.365,21.977-18.365c11.741,0,21.677,6.623,21.677,18.365C277.858,232.373,273.644,283.855,273.644,319.681z"/>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
`;


    let landingSite = `<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 511.999 511.999" style="enable-background:new 0 0 511.999 511.999;" xml:space="preserve">
<polygon style="fill:#C8F4DE;" points="500.881,351.23 11.119,351.23 38.328,296.812 473.671,296.812 "/>
<polygon style="fill:#4A7DBA;" points="392.044,24.722 233.761,24.722 167.047,24.722 119.954,24.722 79.142,254.952 
	79.142,296.812 432.858,296.812 432.858,254.952 "/>
<circle style="fill:#87DFD6;" cx="257.117" cy="160.77" r="54.418"/>
<path d="M190.141,28.981c0.278,0.667,0.623,1.312,1.023,1.912c0.4,0.612,0.867,1.179,1.379,1.69c0.511,0.511,1.079,0.978,1.69,1.379
	c0.6,0.4,1.245,0.745,1.924,1.023c0.667,0.289,1.368,0.5,2.079,0.645s1.445,0.211,2.168,0.211s1.457-0.068,2.168-0.211
	c0.712-0.145,1.412-0.356,2.09-0.645c0.667-0.278,1.312-0.623,1.912-1.023c0.612-0.4,1.179-0.867,1.69-1.379
	c0.511-0.511,0.978-1.079,1.379-1.69c0.4-0.6,0.745-1.245,1.023-1.912c0.278-0.678,0.5-1.379,0.645-2.079
	c0.145-0.723,0.211-1.458,0.211-2.179c0-0.723-0.067-1.458-0.211-2.168c-0.145-0.712-0.367-1.413-0.645-2.079
	c-0.278-0.678-0.623-1.323-1.023-1.924c-0.4-0.612-0.867-1.179-1.379-1.69c-0.511-0.511-1.079-0.978-1.69-1.39
	c-0.6-0.389-1.245-0.734-1.912-1.012c-0.678-0.278-1.379-0.5-2.09-0.634c-1.423-0.289-2.902-0.289-4.336,0
	c-0.712,0.133-1.412,0.356-2.079,0.634c-0.678,0.278-1.323,0.624-1.924,1.012c-0.612,0.411-1.179,0.878-1.69,1.39
	s-0.978,1.079-1.379,1.69c-0.4,0.6-0.745,1.245-1.023,1.924c-0.278,0.667-0.5,1.368-0.634,2.079
	c-0.145,0.712-0.222,1.445-0.222,2.168c0,0.722,0.078,1.457,0.222,2.179C189.641,27.602,189.863,28.303,190.141,28.981z"/>
<path d="M190.462,160.767c0,36.137,29.4,65.537,65.537,65.537s65.537-29.4,65.537-65.537s-29.4-65.536-65.537-65.536
	S190.462,124.63,190.462,160.767z M255.999,117.468c23.875,0,43.299,19.424,43.299,43.298c0,23.876-19.424,43.299-43.299,43.299
	S212.7,184.641,212.7,160.766C212.7,136.892,232.124,117.468,255.999,117.468z"/>
<path d="M510.825,346.258l-27.209-54.418c-1.884-3.768-5.734-6.147-9.945-6.147h-29.695v-30.741c0-0.65-0.057-1.3-0.17-1.94
	L402.993,22.782c-0.942-5.309-5.556-9.179-10.949-9.179H233.761c-6.141,0-11.119,4.979-11.119,11.119s4.978,11.119,11.119,11.119
	h148.962l39.016,220.088v29.763H90.261v-29.765L129.276,35.84h37.771c6.141,0,11.119-4.979,11.119-11.119
	s-4.978-11.119-11.119-11.119h-47.093c-5.393,0-10.007,3.868-10.949,9.179L68.193,253.012c-0.113,0.64-0.17,1.29-0.17,1.94v30.741
	H38.328c-4.212,0-8.061,2.379-9.945,6.147L1.174,346.258c-1.723,3.447-1.539,7.54,0.487,10.818s5.605,5.274,9.458,5.274h89.198
	L28.793,481.555c-3.16,5.265-1.452,12.095,3.814,15.255c1.791,1.074,3.763,1.587,5.711,1.587c3.777,0,7.46-1.926,9.545-5.401
	l78.387-130.646h118.631v124.926c0,6.14,4.978,11.119,11.119,11.119c6.141,0,11.119-4.979,11.119-11.119V362.35h118.631
	l78.387,130.646c2.085,3.476,5.767,5.401,9.545,5.401c1.947,0,3.919-0.513,5.711-1.587c5.266-3.16,6.973-9.989,3.814-15.255
	L411.682,362.35h89.198c3.854,0,7.433-1.996,9.458-5.274C512.364,353.798,512.549,349.705,510.825,346.258z M29.109,340.112
	l16.09-32.18h33.942h353.716H466.8l16.09,32.18H29.109z"/>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>`;

    let labelMark = `<div onmouseout="this.children[1].style.display = 'none';" onmouseover="this.children[1].style.display = 'block';"><div class="dangerIcon" style="width: 15px;">${marker}</div><div class="seismicdata" style="display: none;width:90px; position:absolute; top: 10px; left:6px; background-color: rgba(0, 0, 0, 0.6); border: 1px solid white;"><h4 style="font-size: 11px; color: white;">Lat: {lat}<br>Long: {long}<br>Magnitude: {magn}<br>{string}</h4></div></div>`;

    let years = ['1969', '1970', '1971', '1972', '1973', '1974', '1975', '1976', '1977'];

    let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

    document.getElementById('yearslider').addEventListener('input', (event) => {

      document.getElementById('yearlabel').innerText = years[event.target.value];

      let curYear = parseInt(event.target.value) + 1969;

      let currMonth = parseInt(document.getElementById('monthslider').value);

      let date = new Date(curYear, currMonth + 1, 0);

      let dayslider = document.getElementById('dayslider');

      dayslider.setAttribute('max', date.getDate());
      dayslider.value = 1;
      document.getElementById('daylabel').innerText = 1;

    });

    document.getElementById('monthslider').addEventListener('input', (event) => {


      document.getElementById('monthlabel').innerText = months[event.target.value];

      let curYear = parseInt(document.getElementById('yearslider').value) + 1969;

      let currMonth = parseInt(document.getElementById('monthslider').value);

      let date = new Date(curYear, currMonth + 1, 0);

      let dayslider = document.getElementById('dayslider');

      dayslider.setAttribute('max', date.getDate());
      dayslider.value = 1;
      document.getElementById('daylabel').innerText = 1;

    });

    document.getElementById('dayslider').addEventListener('input', (event) => {
      document.getElementById('daylabel').innerText = event.target.value;

    });


  </script>

  <div id="globeViz"></div>

  <script>

    /*function loadingScreen()
    {
      if(document.readyState == "loading")
      {
        console.log("loading");
        document.getElementById("loadingScreenId").style.display = "none";
      }
        
      if(document.readyState == "complete")
      {
        console.log("complete");
        document.getElementById("loadingScreenId").style.display = "none";
      }
    }

    loadingScreen();

    /*loadingScreen().then(
      function() {}
    );*/



    console.log(document.readyState);

    /*let checkImages = new Promise(resolve => { resolve(areCompleted()); });

    function areCompleted() {
      let images = document.querySelectorAll('img');
      images = Array.from(images);

      for (let i = 0; i < images.length; i--) {
        if (!images[i].complete) {
          console.log("false");
          console.log(document.readyState);
          //return false;
        }
      }
    }*/

    //areCompleted();*/


    const colorScale = d3.scaleOrdinal(['orangered', 'mediumblue', 'darkgreen', 'yellow']);

    const labelsTopOrientation = new Set(['Apollo 12', 'Luna 2', 'Luna 20', 'Luna 21', 'Luna 24', 'LCROSS Probe']); // avoid label collisions

    const elem = document.getElementById('globeViz');

    let gData = [];

    let markdata = [];

    let apolloSeismic;

    let plot_data;


    let nakaData;


    let selectedYear;
    let selectedMonth;
    let selectedDay;

    let globDict;

    let moonland_data;

    async function getData() {

      let naka = await fetch('resources/cleanedData.json');

      nakaData = await naka.json();

      let apollo = await fetch('resources/Apollo_seismic_network.json');

      apolloSeismic = await apollo.json();

      let plots = await fetch('plots/plot_dict.json');

      plot_data = await plots.json();

      let moonlandings = await fetch('resources/moon_lands.json');

      moonland_data = await moonlandings.json();

      start();

    }

    function start() {

      const moon = Globe()
        .globeImageUrl('img/lunar_surface.jpg')
        .bumpImageUrl('img/lunar_bumpmap.jpg')
        .backgroundImageUrl('img/2k_stars_milky_way.jpg')
        .showGraticules(false)
        .showAtmosphere(false)
        .ringsData(gData)
        .ringColor(() => "#1DF907")
        .ringMaxRadius('maxR')
        .ringPropagationSpeed('propagationSpeed')
        .ringRepeatPeriod('repeatPeriod')
        .htmlElementsData(markdata)
        .htmlElement(d => {
          const el = document.createElement('div');

         

          if (d.nak) {
            el.innerHTML = labelMark.replace('{string}', new Date(d.year, d.month, d.day).toDateString()).replace('{lat}', d.lat)
              .replace('{long}', d.lng)
              .replace('{magn}', d.mgn);
          } else {

            let apolloMarks = `<div class="someclasses" svalue="${d.svalue}" onmouseout="this.children[1].style.display = 'none';" onmouseover="this.children[1].style.display = 'block';"><div class="dangerIcon" style="width: 20px;">${landingSite}</div><div class="seismicdata" style="display: none;width:90px; position:absolute; top: 10px; left:6px; background-color: rgba(0, 0, 0, 0.6); border: 1px solid white;"><h4 style="font-size: 11px; color: white;">Mission: {miss}<br>Name: {na}<br>Lat: {lat}<br>Long: {long}</h4></div></div>`;

            el.innerHTML = apolloMarks.replace('{lat}', d.lat)
              .replace('{long}', d.lng)
              .replace('{miss}', d.mission)
              .replace('{na}', d.name);
          }

          el.style['pointer-events'] = 'auto';
          el.style.cursor = 'pointer';
          el.onclick = (event) => {

            let stationNum = event.currentTarget.children[0].getAttribute("svalue");

            if (globDict.stations.includes(stationNum)) {

              let filePath = `plots/${stationNum}/${selectedYear}/${globDict.doy}/${stationNum}_${selectedYear}_${globDict.doy}_mh_plot.png`;

              document.getElementById('plots').src = filePath;
              document.getElementById('cont').style.display = "block";

            }

          };
          return el;
        })
        .labelText('label')
        .labelSize(2.0)
        .labelDotRadius(0.6)
        .labelDotOrientation(d => labelsTopOrientation.has(d.label) ? 'top' : 'bottom')
        .labelColor(d => "#5000e6")
        .labelsData(moonland_data)
        (document.getElementById('globeViz'));

      const colorInterpolator = t => `rgba(255,100,50,${Math.sqrt(1 - t)})`;

      function clearTab(event) {
        document.getElementById('contdata').style.display = 'none';
        document.getElementById('nakamura').style.display = 'block';
        document.getElementById('con').style.borderBottom = 'none';
        document.getElementById('nak').style.borderBottom = '2px solid white';

        let divs = document.querySelectorAll('.nakEvent');

        for (const child of divs) {
          child.style.backgroundColor = "#5000e6";

        }

        showNakaIndexArray = [];

        markdata = [];

        gData = [];

        moon.ringsData([]);
        moon.htmlElementsData([]);

      }

      document.getElementById('nak').addEventListener('click', clearTab);

      document.getElementById('clearMap').addEventListener('click', (event) => {

        showNakaIndexArray = [];

        markdata = [];

        gData = [];

        moon.ringsData([]);
        moon.htmlElementsData([]);

        let divs = document.querySelectorAll('.nakEvent');

        for (const child of divs) {
          child.style.backgroundColor = "rgba(0, 0, 0, 0.6)";

        }

      });



      document.getElementById('con').addEventListener('click', (event) => {
        
        document.getElementById('nakamura').style.display = 'none';
        document.getElementById('contdata').style.display = 'block';
        document.getElementById('nak').style.borderBottom = 'none';
        document.getElementById('con').style.borderBottom = '2px solid white';

        showNakaIndexArray = [];

        markdata = [];

        gData = [];

        moon.ringsData([]);
        moon.htmlElementsData([]);

      });

      showNakaIndexArray = [];

      function showNaka(event) {
        let index = event.currentTarget.getAttribute("nakNum");

        alreadyActivated = false;

        for(existingIndex in showNakaIndexArray)
        {
          if(index == showNakaIndexArray[existingIndex])
          {
            a = showNakaIndexArray.splice(existingIndex, 1);
            console.log(a);
            alreadyActivated = true;
            break;
          }
        }

        if(alreadyActivated)
        {
          markdata = [];

          gData = [];
  
          moon.ringsData([]);
          moon.htmlElementsData([]);

          for(i in showNakaIndexArray)
          {
            event.currentTarget.children[0].style.backgroundColor = 'rgba(192, 192, 192, 0.6)';


            markdata.push({
              nak: true,
              lat: nakaData[i].lat,
              lng: nakaData[i].long,
              size: nakaData[i].magn * 10,
              year: nakaData[i].year,
              day: nakaData[i].day,
              month: nakaData[i].month,
              mgn: nakaData[i].magn,
  
  
  
            });
  
            gData.push({
              lat: nakaData[i].lat,
              lng: nakaData[i].long,
              char: nakaData[i].char,
              maxR: nakaData[i].magn * 7,
              propagationSpeed: 5,
              repeatPeriod: 500
            });
            
            moon.htmlElementsData(markdata);
            moon.ringsData(gData);
          }

        }

        if(!alreadyActivated)
        {
          showNakaIndexArray.push(index);

          event.currentTarget.children[0].style.backgroundColor = 'rgba(192, 192, 192, 0.6)';


          markdata.push({
            nak: true,
            lat: nakaData[index].lat,
            lng: nakaData[index].long,
            size: nakaData[index].magn * 10,
            year: nakaData[index].year,
            day: nakaData[index].day,
            month: nakaData[index].month,
            mgn: nakaData[index].magn,



          });

          gData.push({
            lat: nakaData[index].lat,
            lng: nakaData[index].long,
            char: nakaData[index].char,
            maxR: nakaData[index].magn * 7,
            propagationSpeed: 5,
            repeatPeriod: 500
          });
          
          moon.htmlElementsData(markdata);
          moon.ringsData(gData);
        }
      }

      let naks = document.getElementById('naklabels');


      for (const child of naks.children) {
        child.style.cursor = "pointer";
        child.addEventListener('click', showNaka);
      }





      function showNakaSlider() {        

        markdata = [];

        gData = [];

        moon.ringsData([]);
        moon.htmlElementsData([]);


        let naks = document.getElementById('naklabels');
  
  
        selectedYear = parseInt(document.getElementById('yearslider').value) + 1969;
  
        selectedMonth = parseInt(document.getElementById('monthslider').value) + 1;
  
        selectedDay = parseInt(document.getElementById('dayslider').value);
  
        /*console.log(selectedYear);
        console.log(selectedMonth);
        console.log(selectedDay);*/
  
  
        for (const child of naks.children) {
          child.style.cursor = "pointer";
  
          inputString = child.innerHTML;
  
          const regex = /(\d{4}), (\d{1,2}) (\w+)/;
          match = regex.exec(inputString);
  
          if (match) {
            childYear = match[1];
            childDay = match[2];
            childMonthName = match[3];

            /*console.log(childDay);
            console.log(childMonthName);
            console.log(childYear);*/

            if(childMonthName.toUpperCase() == "JANUARY")
            {
              childMonth = 1;
            }
            else if(childMonthName.toUpperCase() == "FEBRUARY")
            {
              childMonth = 2;
            }
            else if(childMonthName.toUpperCase() == "MARCH")
            {
              childMonth = 3;
            }
            else if(childMonthName.toUpperCase() == "APRIL")
            {
              childMonth = 4;
            }
            else if(childMonthName.toUpperCase() == "MAY")
            {
              childMonth = 5;
            }
            else if(childMonthName.toUpperCase() == "JUNE")
            {
              childMonth = 6;
            }
            else if(childMonthName.toUpperCase() == "JULY")
            {
              childMonth = 7;
            }
            else if(childMonthName.toUpperCase() == "AUGUST")
            {
              childMonth = 8;
            }
            else if(childMonthName.toUpperCase() == "SEPTEMBER")
            {
              childMonth = 9;
            }
            else if(childMonthName.toUpperCase() == "OCTOBER")
            {
              childMonth = 10;
            }
            else if(childMonthName.toUpperCase() == "NOVEMBER")
            {
              childMonth = 11;
            }
            else if(childMonthName.toUpperCase() == "DECEMBER")
            {
              childMonth = 12;
            }
            else {
              childMonth = 0;
            }
  
  
            if((childYear < selectedYear) || (childYear == selectedYear & childMonth < selectedMonth) || (childYear == selectedYear & childMonth == selectedMonth & childDay <= selectedDay))
            {

              console.log(childDay);
              console.log(childMonthName);
              console.log(childMonth);
              console.log(childYear);


              newNakNum = child.getAttribute("nakNum");
  
              markdata.push({
                nak: true,
                lat: nakaData[newNakNum].lat,
                lng: nakaData[newNakNum].long,
                size: nakaData[newNakNum].magn * 10,
                year: nakaData[newNakNum].year,
                day: nakaData[newNakNum].day,
                month: nakaData[newNakNum].month,
                mgn: nakaData[newNakNum].magn,
        
        
        
              });
        
              gData.push({
                lat: nakaData[newNakNum].lat,
                lng: nakaData[newNakNum].long,
                char: nakaData[newNakNum].char,
                maxR: nakaData[newNakNum].magn * 7,
                propagationSpeed: 5,
                repeatPeriod: 500
              })
        
              moon.htmlElementsData(markdata);
              moon.ringsData(gData);//
            }
          }
        }
        //event.currentTarget.children[0].style.backgroundColor = 'rgba(192, 192, 192, 0.6)';
      }

      document.getElementById('yearslider').addEventListener('input', showNakaSlider);

      document.getElementById('dayslider').addEventListener('input', showNakaSlider);

      document.getElementById('monthslider').addEventListener('input', showNakaSlider);

    }


    getData();

    /*
        markdata = [];

        gData = [];

        moon.ringsData([]);
        moon.htmlElementsData([]);
    */



  </script>
</body>

</html>